<script>

    let loadedLoopPics = false;
    let loadedARPics = false;

    let loopImageDisplay = null;
    let arImageDisplay = null;

    const LooperImages = document.getElementById("Loop-Images-Trim");
    const ARImages = document.getElementById("AR-Images-Trim");

    //click elements
    const LPB = document.getElementById('Loop-Link-2-Wrap');
    const LLCB = document.querySelector('.lcli');
    const LRCB = document.querySelector('.rcli');
    const LEI = document.querySelectorAll('.loopexit');

    const APB = document.getElementById('AR-Link-4-Wrap');
    const ALCB = document.querySelector('.lcai');
    const ARCB = document.querySelector('.rcai');
    const AEI = document.querySelectorAll('.arexit');


    LPB.addEventListener("click", ()=> getImages("looper"));
    LLCB.addEventListener("click", () => leftCycleImages('looper'));
    LRCB.addEventListener("click", () => rightCycleImages('looper'));
    LEI.forEach(but => {
        but.addEventListener("click", () => showHideImages('looper'));
    });

    APB.addEventListener("click", ()=> getImages("ar"));
    ALCB.addEventListener("click", () => leftCycleImages('ar'));
    ARCB.addEventListener("click", () => rightCycleImages('ar'));
    AEI.forEach(but => {
        but.addEventListener("click", () => showHideImages('ar'));
    });

    const showHideImages = (picset) => {

        if(picset == 'looper'){
            loopImageDisplay.forEach(elm => {
                elm.classList.toggle("active");
            });
        }else if(picset == 'ar'){
            arImageDisplay.forEach(elm => {
                elm.classList.toggle("active");
            });
        }
    };

    const getImages = (picset) => {
        if((picset == "looper" && loadedLoopPics)||(picset == "ar" && loadedARPics)){
            showHideImages(picset);
        }else{
            let tempURL = '/pictures?id=' + picset;
            $.ajax({url: tempURL,method: 'GET'})
                .then((data) => {
                    let loadedItems = new DOMParser().parseFromString(data,'text/html').body;
                    if(picset == "looper"){
                        loadedItems = loadedItems.querySelector('#Loop-Images-Wrapper');
                        LooperImages.appendChild(loadedItems);
                        loadedLoopPics = true;
                        loopImageDisplay = document.querySelectorAll('.lpu');
                    }else if(picset == "ar"){
                        loadedItems = loadedItems.querySelector('#AR-Images-Wrapper');
                        ARImages.appendChild(loadedItems);
                        loadedARPics = true;
                        arImageDisplay = document.querySelectorAll('.apu');
                    }
                    showHideImages(picset);
            });
        }
    }

    const leftCycleImages = (picset) => {
        if(picset == "looper"){
            LooperImages.scrollLeft -= LooperImages.clientWidth;
        }else if(picset == 'ar'){
            ARImages.scrollLeft -= ARImages.clientWidth;
        }   
        
    };

    const rightCycleImages = (picset) => {
        if(picset == "looper"){
            LooperImages.scrollLeft += LooperImages.clientWidth;
        }else if(picset == 'ar'){
            ARImages.scrollLeft += ARImages.clientWidth;
        }
        
    };

</script>